#!/usr/bin/env bash
# -*- ENCODING: UTF-8 -*-
##
## @author     Raúl Caro Pastorino
## @copyright  Copyright © 2018 Raúl Caro Pastorino
## @license    https://wwww.gnu.org/licenses/gpl.txt
## @email      tecnico@fryntiz.es
## @web        www.fryntiz.es
## @github     https://github.com/fryntiz
## @gitlab     https://gitlab.com/fryntiz
## @twitter    https://twitter.com/fryntiz

## Please see http://i3wm.org/docs/userguide.html for a complete and oficial reference!

## Tecla modificadora.
set $mod Mod4

## Fuente para títulos de ventanas usadas en bar {} block below.
font pango:monospace 8
#font pango:DejaVu Sans Mono 8

## Usar Mouse+$mod para arrastrar ventanas flotantes
floating_modifier $mod

## Abrir terminal con $mod+Intro
bindsym $mod+Return exec i3-sensible-terminal

## Cerrar ventana actual con $mod+shift+q
bindsym $mod+Shift+q kill

## Abrir dmenu (Lanzador de programas)
bindsym $mod+d exec dmenu_run

# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop



############################################################
###############            i3bar          ##################
############################################################
# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)

bar {
        position        top             #Posición Arriba
        status_command  i3status        # Mostrar status de monitoreo
        font pango:terminus, awesome 9  #Fuente tipografica


    colors {
            background  #001111  #Color del panel
            statusline  #fdf6e3  #Color del status
            separator   #9e9e9e  #Color de separadores

#::::::::::::::::::::::: Indicadores ::::::::::::::::::::::::::#
#                            bordes     backgr     text
        focused_workspace    #FDF6E3    #FDF6E3    #002B36
        inactive_workspace   #607D8B    #607D8B    #002B36
        urgent_workspace     #859900    #859900    #121212

    }
}

#Decoración de ventanas
# class           bordes   backgr.  text
client.focused    #4c7899  #285577  #ffffff  #2e9ef4
client.unfocused  #4c7899  #24364F  #aaaaaa  #2e9ef4
client.focused    #c10101  #880404  #ffffff  #00AA00

## Quita los bordes de los extremos de la pantalla
hide_edge_borders vertical

############################################################
#############          Bindings           ##################
############################################################
## Navegar entre las ventanas $mod+[jkln] o $mod+[←↓→]
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+ntilde focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

## Mover una ventana $mod+shift+[jkln] o $mod+shift+[←↓→]
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+ntilde move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

## Poner en pantalla completa la ventana actual con $mod+f
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

## Alternar ventana entre flotante o tiling con $mod+Shift+space
bindsym $mod+Shift+space floating toggle

## Cambiar el foco entre tiling / floating windows
bindsym $mod+space focus mode_toggle

## El foco sobre el contenedor padre
bindsym $mod+a focus parent

## El foco sobre el contenedor hijo
#bindsym $mod+d focus child

## Cambiar entre espacioes de trabajo
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

## Mover una ventana a un espacio de trabajo concreto
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

## Redimensionar ventana (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym ntilde resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

#Imprimir pantalla
bindsym Print exec scrot '%Y-%m-%d_%T_scrot.png' -e 'mv $f ~/Imágenes/screenshots/'

# Screen brightness controls
bindcode $mod+67 exec xbacklight - 10
bindcode $mod+68 exec xbacklight + 10

# media keys
#bindsym $mod+Home exec curl http://localhost:2000/command/default/playpause
#bindsym $mod+Next exec curl http://localhost:2000/command/default/prev
#bindsym $mod+Prior exec curl http://localhost:2000/command/default/next

############################################################
###############          Autostart        ##################
############################################################
exec --no-startup-id dropbox start
exec --no-startup-id synology-cloud-station-drive
exec --no-startup-id nautilus
exec --no-startup-id i3-msg 'workspace 2; exec x-www-browser; workspace 1'
exec --no-startup-id i3-msg 'workspace 3; exec tilix; workspace 1'

# Red
exec --no-startup-id nm-applet

# Transparencia
exec --no-startup-id compton -cCGb

# Teclado numerico
exec --no-startup-id numlockx on

# Applet de volumen
exec --no-startup-id volumeicon

## run with reload
#exec_always --no-startup-id al-polybar-session
exec_always --no-startup-id nitrogen --restore
#exec_always --no-startup-id xrdb -load ~/.Xresources

# run once
#exec --no-startup-id ksuperkey -e 'Super_L=Alt_L|F1'
#exec --no-startup-id al-compositor --start
## Fondo de pantalla nitrogen
exec --no-startup-id nitrogen --restore
#exec --no-startup-id xfsettingsd
#exec --no-startup-id lxpolkit

assign [title="^Momentum$"] 3
for_window [title="^Momentum$"] focus
for_window [title="^Momentum$"] floating enable

# exec --no-startup-id xinput --set-prop 'pointer:Telink Wireless Receiver' 'Device Accel Constant Deceleration' 3
# exec --no-startup-id xinput --set-prop 'pointer:Telink Wireless Receiver' 'Device Accel Profile' 4
# exec --no-startup-id xset m 4 3
exec --no-startup-id xset r rate 250 30
exec --no-startup-id setxkbmap -option "ctrl:swapcaps"
# exec --no-startup-id ~/.local/bin/xcape -e 'Control_L=Escape'
# exec --no-startup-id lxpolkit
# exec --no-startup-id start-pulseaudio-x11
# exec --no-startup-id pasystray
# exec --no-startup-id pcmanfm -d
#exec --no-startup-id xflux -l 36.7756 -g -6.3616 -k 4200
#exec --no-startup-id ~/.local/bin/unclutter --timeout 1 --fork
#exec --no-startup-id "i3-msg 'workspace 2; append_layout ~/.i3/workspace-2.json'"
#exec --no-startup-id sakura
#exec --no-startup-id "i3-msg 'workspace 1; append_layout ~/.i3/workspace-1.json'"
#exec --no-startup-id x-www-browser

############################################################
##############        Reload configs        ################
############################################################
## Recargar el archivo de configuración
bindsym $mod+Shift+c reload

## Reiniciar i3 conservando la sesión
bindsym $mod+Shift+r restart

# Salir de i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'Si pulsas sobre salir se cerrará todo lo que tengas abierto. ¿Realmente quieres salir?' -b 'Si, exit i3' 'i3-msg exit'"

###########################################################
############      Container/Window control     ############
###########################################################

###########################################################
############        application settings       ############
###########################################################
## Bloqueo de pantalla
bindsym $mod+p exec "xautolock -locknow -locker 'i3lock -c 000000 -d'"
exec_always --no-startup-id xautolock -detectsleep -notify 30 -notifier "notify-send -u low -t 2000 -- 'Locking screen in 30s'" -time 5 -locker "i3lock -c 000000 -d"

## Volumen
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5% #increase sound volume
bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -5% #decrease sound volume
bindsym XF86AudioMute exec pactl set-sink-mute 0 toggle # mute sound

#for_window [class="(?i)(?:qt5ct|pinentry)"] floating enable, focus
#for_window [class="(?i)(?:tilix|thunar)"] focus
#for_window [class="(?i)(?:geany|firefox)"] focus

# Assign Applications to specific workspace
# get class with xprop
#assign [class="(?i)(?:firefox)"] → $WS1
#assign [class="(?i)(?:geany)"] → $WS2
#assign [class="(?i)(?:thunar)"] → $WS3

# focus, floating, & sticky
#for_window [title="(?i)(?:copying|deleting|moving)"] floating enable
#for_window [window_role="(?i)(?:pop-up|setup)"] floating enable

# set trayer to be borderless
#for_window [class="(?i)trayer"] border pixel 0

###########################################################
############               PRUEBAS             ############
###########################################################

exec --no-startup-id xbindkeys
exec --no-startup-id pulseaudio --start
exec_always --no-startup-id dunst
